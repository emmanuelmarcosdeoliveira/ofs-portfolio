"use client";

import React, { forwardRef, useRef } from "react";

import { AnimatedBeam } from "@/components/ui/animated-beam";
import { cn } from "@/lib/utils";

const Circle = forwardRef<
  HTMLDivElement,
  { className?: string; children?: React.ReactNode }
>(({ className, children }, ref) => {
  return (
    <div
      ref={ref}
      className={cn(
        "z-10 flex size-16 items-center justify-center rounded-2xl border-1 bg-background/90 dark:bg-muted border-amber-600   p-3 shadow-[0_0_20px_-12px_rgba(0,0,0,0.8)]",
        className
      )}
    >
      {children}
    </div>
  );
});

Circle.displayName = "Circle";

export function AnimatedBeamDemo() {
  const containerRef = useRef<HTMLDivElement>(null);
  const div1Ref = useRef<HTMLDivElement>(null);
  const div2Ref = useRef<HTMLDivElement>(null);
  const div3Ref = useRef<HTMLDivElement>(null);
  const div4Ref = useRef<HTMLDivElement>(null);
  const div5Ref = useRef<HTMLDivElement>(null);
  const div6Ref = useRef<HTMLDivElement>(null);
  const div7Ref = useRef<HTMLDivElement>(null);

  return (
    <div
      className="flex h-[400px] py-6 items-start justify-center overflow-hidden relative w-full"
      ref={containerRef}
    >
      <div className="flex flex-col gap-10 h-[100px] items-stretch justify-between max-w-lg size-full">
        <div className="flex flex-row items-center justify-between">
          <Circle ref={div1Ref}>
            <Icons.javascript />
          </Circle>
          <Circle ref={div5Ref}>
            <Icons.git />
          </Circle>
        </div>
        <div className="flex flex-row items-center justify-between">
          <Circle ref={div2Ref}>
            <Icons.next />
          </Circle>
          <Circle ref={div4Ref} className="size-22">
            <Icons.react />
          </Circle>
          <Circle ref={div6Ref}>
            <Icons.tailwind />
          </Circle>
        </div>
        <div className="flex flex-row items-center justify-between">
          <Circle ref={div3Ref}>
            <Icons.typescript />
          </Circle>
          <Circle ref={div7Ref}>
            <Icons.shadcn />
          </Circle>
        </div>
      </div>

      <AnimatedBeam
        containerRef={containerRef}
        fromRef={div1Ref}
        toRef={div4Ref}
        curvature={-55}
        endYOffset={-10}
      />
      <AnimatedBeam
        containerRef={containerRef}
        fromRef={div2Ref}
        toRef={div4Ref}
        curvature={0}
        endYOffset={0}
      />
      <AnimatedBeam
        containerRef={containerRef}
        fromRef={div3Ref}
        toRef={div4Ref}
        curvature={65}
        endYOffset={10}
      />
      <AnimatedBeam
        containerRef={containerRef}
        fromRef={div5Ref}
        toRef={div4Ref}
        curvature={-55}
        endYOffset={-10}
        reverse
      />
      <AnimatedBeam
        containerRef={containerRef}
        fromRef={div6Ref}
        toRef={div4Ref}
        curvature={0}
        endYOffset={0}
        reverse
      />
      <AnimatedBeam
        containerRef={containerRef}
        fromRef={div7Ref}
        toRef={div4Ref}
        curvature={65}
        endYOffset={10}
        reverse
      />
    </div>
  );
}

const Icons = {
  next: () => (
    <svg
      width="42"
      height="42"
      viewBox="0 0 42 42"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M19.6246 0.0113023C19.5343 0.0195123 19.2469 0.0482471 18.9883 0.0687719C13.0229 0.606523 7.43519 3.82482 3.89619 8.77131C1.92551 11.5216 0.665103 14.6414 0.188856 17.9459C0.0205279 19.0994 0 19.4401 0 21.0041C0 22.5681 0.0205279 22.9088 0.188856 24.0623C1.33021 31.948 6.94252 38.5734 14.5543 41.0281C15.9173 41.4674 17.3543 41.767 18.9883 41.9477C19.6246 42.0174 22.3754 42.0174 23.0117 41.9477C25.8323 41.6357 28.2217 40.9378 30.5783 39.7351C30.9396 39.5504 31.0094 39.5011 30.9601 39.4601C30.9273 39.4354 29.3877 37.3706 27.5402 34.8748L24.1818 30.3388L19.9736 24.1116C17.6581 20.688 15.7531 17.8884 15.7367 17.8884C15.7202 17.8843 15.7038 20.6511 15.6956 24.0295C15.6833 29.9447 15.6792 30.1828 15.6053 30.3224C15.4985 30.5235 15.4164 30.6056 15.244 30.6959C15.1126 30.7616 14.9977 30.7739 14.3777 30.7739H13.6674L13.4786 30.6549C13.3554 30.5769 13.2651 30.4743 13.2035 30.3552L13.1173 30.1705L13.1255 21.94L13.1378 13.7055L13.2651 13.5454C13.3308 13.4592 13.4704 13.3483 13.5689 13.295C13.7372 13.2129 13.8029 13.2047 14.5132 13.2047C15.3507 13.2047 15.4903 13.2375 15.7079 13.4756C15.7695 13.5413 18.0481 16.973 20.7742 21.1067C23.5003 25.2404 27.2282 30.8848 29.0592 33.6556L32.3847 38.6924L32.5531 38.5816C34.0434 37.6128 35.6199 36.2335 36.868 34.7968C39.5243 31.7468 41.2364 28.0277 41.8111 24.0623C41.9795 22.9088 42 22.5681 42 21.0041C42 19.4401 41.9795 19.0994 41.8111 17.9459C40.6698 10.0603 35.0575 3.43485 27.4457 0.980075C26.1032 0.544948 24.6745 0.245286 23.0733 0.0646669C22.6792 0.0236173 19.9654 -0.0215374 19.6246 0.0113023ZM28.2217 12.7121C28.4188 12.8106 28.5789 12.9994 28.6364 13.1965C28.6692 13.3032 28.6774 15.5856 28.6692 20.7291L28.6569 28.1098L27.3554 26.1148L26.0499 24.1198V18.7546C26.0499 15.2859 26.0663 13.336 26.0909 13.2416C26.1566 13.0117 26.3003 12.8311 26.4974 12.7244C26.6657 12.6382 26.7273 12.63 27.3718 12.63C27.9795 12.63 28.0862 12.6382 28.2217 12.7121Z"
        fill="black"
      />
      <defs>
        <clipPath id="clip0_11_17">
          <rect width="42" height="42" fill="white" />
        </clipPath>
      </defs>
    </svg>
  ),
  react: () => (
    <svg
      width="128"
      height="128"
      viewBox="0 0 128 128"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M63.9977 75.3996C70.2937 75.3996 75.3977 70.2957 75.3977 63.9996C75.3977 57.7036 70.2937 52.5996 63.9977 52.5996C57.7016 52.5996 52.5977 57.7036 52.5977 63.9996C52.5977 70.2957 57.7016 75.3996 63.9977 75.3996Z"
        fill="#61DAFB"
      />
      <path
        d="M107.298 45.1996C105.098 44.3996 102.798 43.5996 100.398 42.8996C100.998 40.4996 101.498 38.0996 101.898 35.7996C103.998 22.5996 101.698 13.2996 95.2984 9.69961C93.3984 8.59961 91.2984 8.09961 88.8984 8.09961C81.8984 8.09961 72.9984 13.2996 63.9984 21.9996C54.9984 13.2996 46.0984 8.09961 39.0984 8.09961C36.6984 8.09961 34.5984 8.59961 32.6984 9.69961C26.2984 13.3996 23.9984 22.6996 26.0984 35.7996C26.4984 38.0996 26.9984 40.4996 27.5984 42.8996C25.1984 43.5996 22.8984 44.2996 20.6984 45.1996C8.19844 49.9996 1.39844 56.5996 1.39844 63.9996C1.39844 71.3996 8.29844 77.9996 20.6984 82.7996C22.8984 83.5996 25.1984 84.3996 27.5984 85.0996C26.9984 87.4996 26.4984 89.8996 26.0984 92.1996C23.9984 105.4 26.2984 114.7 32.6984 118.3C34.5984 119.4 36.6984 119.9 39.0984 119.9C46.1984 119.9 55.0984 114.7 63.9984 106C72.9984 114.7 81.8984 119.9 88.8984 119.9C91.2984 119.9 93.3984 119.4 95.2984 118.3C101.698 114.6 103.998 105.3 101.898 92.1996C101.498 89.8996 100.998 87.4996 100.398 85.0996C102.798 84.3996 105.098 83.6996 107.298 82.7996C119.798 77.9996 126.598 71.3996 126.598 63.9996C126.598 56.5996 119.798 49.9996 107.298 45.1996ZM92.4984 14.6996C96.5984 17.0996 97.9984 24.4996 96.2984 34.9996C95.9984 37.0996 95.4984 39.2996 94.8984 41.5996C89.6984 40.3996 84.1984 39.5996 78.3984 39.0996C74.9984 34.2996 71.4984 29.9996 67.9984 26.0996C75.3984 18.7996 82.8984 13.7996 88.9984 13.7996C90.2984 13.7996 91.4984 14.0996 92.4984 14.6996ZM81.2984 73.9996C79.4984 77.1996 77.3984 80.3996 75.1984 83.5996C71.4984 83.8996 67.7984 83.9996 63.9984 83.9996C60.0984 83.9996 56.3984 83.8996 52.7984 83.5996C50.5984 80.3996 48.5984 77.1996 46.7984 73.9996C44.8984 70.6996 43.0984 67.2996 41.4984 63.9996C43.0984 60.6996 44.8984 57.2996 46.7984 53.9996C48.5984 50.7996 50.6984 47.5996 52.8984 44.3996C56.5984 44.0996 60.2984 43.9996 64.0984 43.9996C67.9984 43.9996 71.6984 44.0996 75.2984 44.3996C77.4984 47.5996 79.4984 50.7996 81.2984 53.9996C83.1984 57.2996 84.9984 60.6996 86.5984 63.9996C84.8984 67.2996 83.1984 70.5996 81.2984 73.9996ZM89.5984 70.6996C91.0984 74.1996 92.2984 77.5996 93.3984 80.9996C89.9984 81.7996 86.3984 82.3996 82.5984 82.8996C83.7984 80.9996 85.0984 78.9996 86.1984 76.8996C87.3984 74.7996 88.4984 72.6996 89.5984 70.6996ZM63.9984 97.7996C61.5984 95.1996 59.2984 92.3996 57.0984 89.4996C59.3984 89.5996 61.6984 89.6996 63.9984 89.6996C66.2984 89.6996 68.5984 89.5996 70.8984 89.4996C68.6984 92.3996 66.3984 95.1996 63.9984 97.7996ZM45.3984 82.7996C41.5984 82.2996 37.9984 81.6996 34.5984 80.8996C35.6984 77.5996 36.8984 74.0996 38.3984 70.5996C39.4984 72.5996 40.5984 74.6996 41.7984 76.6996C42.9984 78.8996 44.1984 80.7996 45.3984 82.7996ZM38.3984 57.2996C36.8984 53.7996 35.6984 50.3996 34.5984 46.9996C37.9984 46.1996 41.5984 45.5996 45.3984 45.0996C44.1984 46.9996 42.8984 48.9996 41.7984 51.0996C40.5984 53.1996 39.4984 55.2996 38.3984 57.2996ZM63.9984 30.1996C66.3984 32.7996 68.6984 35.5996 70.8984 38.4996C68.5984 38.3996 66.2984 38.2996 63.9984 38.2996C61.6984 38.2996 59.3984 38.3996 57.0984 38.4996C59.2984 35.5996 61.5984 32.7996 63.9984 30.1996ZM86.1984 51.1996L82.5984 45.1996C86.3984 45.6996 89.9984 46.2996 93.3984 47.0996C92.2984 50.3996 91.0984 53.8996 89.5984 57.3996C88.4984 55.2996 87.3984 53.1996 86.1984 51.1996ZM31.6984 34.9996C29.9984 24.4996 31.3984 17.0996 35.4984 14.6996C36.4984 14.0996 37.6984 13.7996 38.9984 13.7996C44.9984 13.7996 52.4984 18.6996 59.9984 26.0996C56.4984 29.8996 52.9984 34.2996 49.5984 39.0996C43.7984 39.5996 38.2984 40.4996 33.0984 41.5996C32.4984 39.2996 32.0984 37.0996 31.6984 34.9996ZM6.99844 63.9996C6.99844 59.2996 12.6984 54.2996 22.6984 50.5996C24.6984 49.7996 26.8984 49.0996 29.0984 48.4996C30.6984 53.4996 32.6984 58.7996 35.0984 64.0996C32.6984 69.3996 30.5984 74.5996 29.0984 79.5996C15.2984 75.5996 6.99844 69.5996 6.99844 63.9996ZM35.4984 113.3C31.3984 110.9 29.9984 103.5 31.6984 92.9996C31.9984 90.8996 32.4984 88.6996 33.0984 86.3996C38.2984 87.5996 43.7984 88.3996 49.5984 88.8996C52.9984 93.6996 56.4984 97.9996 59.9984 101.9C52.5984 109.2 45.0984 114.2 38.9984 114.2C37.6984 114.2 36.4984 113.9 35.4984 113.3ZM96.2984 92.9996C97.9984 103.5 96.5984 110.9 92.4984 113.3C91.4984 113.9 90.2984 114.2 88.9984 114.2C82.9984 114.2 75.4984 109.3 67.9984 101.9C71.4984 98.0996 74.9984 93.6996 78.3984 88.8996C84.1984 88.3996 89.6984 87.4996 94.8984 86.3996C95.4984 88.6996 95.8984 90.8996 96.2984 92.9996ZM105.298 77.3996C103.298 78.1996 101.098 78.8996 98.8984 79.4996C97.2984 74.4996 95.2984 69.1996 92.8984 63.8996C95.2984 58.5996 97.3984 53.3996 98.8984 48.3996C112.698 52.3996 120.998 58.3996 120.998 63.9996C120.998 68.6996 115.198 73.6996 105.298 77.3996Z"
        fill="#61DAFB"
      />
    </svg>
  ),
  javascript: () => (
    <svg
      width="100"
      height="100"
      viewBox="0 0 32 32"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M0 0V31.296H31.296V0H0ZM16.334 26.772C15.873 27.709 14.992 28.325 13.972 28.622C12.404 28.982 10.905 28.777 9.789 28.107C9.042 27.649 8.459 26.944 8.064 26.132C8.858 25.647 9.65 25.159 10.444 24.674C10.465 24.683 10.527 24.796 10.611 24.942C10.914 25.451 11.176 25.811 11.691 26.063C12.197 26.235 13.306 26.346 13.735 25.456C13.997 25.004 13.913 23.52 13.913 21.911C13.913 19.382 13.925 16.895 13.925 14.335H16.852C16.852 17.023 16.867 19.718 16.852 22.402C16.858 24.047 17.001 25.543 16.334 26.772ZM28.478 25.945C27.461 29.426 21.787 29.539 19.521 27.239C19.042 26.698 18.742 26.415 18.456 25.79C19.661 25.097 19.661 25.097 20.833 24.419C21.47 25.398 22.059 25.936 23.118 26.156C24.555 26.331 26.001 25.838 25.677 24.312C25.344 23.065 22.735 22.762 20.959 21.429C19.156 20.218 18.734 17.276 20.215 15.595C20.709 14.973 21.551 14.509 22.434 14.286L23.356 14.167C25.126 14.131 26.233 14.598 27.045 15.506C27.271 15.735 27.455 15.982 27.801 16.518C26.858 17.119 26.861 17.113 25.51 17.988C25.221 17.366 24.743 16.976 24.237 16.807C23.452 16.569 22.461 16.828 22.256 17.658C22.185 17.914 22.2 18.152 22.313 18.574C22.631 19.3 23.699 19.615 24.657 20.055C27.415 21.174 28.346 22.372 28.575 23.8C28.795 25.029 28.521 25.826 28.48 25.945H28.478Z"
        fill="#F7E018"
      />
    </svg>
  ),
  typescript: () => (
    <svg
      width="125"
      height="126"
      viewBox="0 0 125 126"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M0 62.9102V125.41H125V0.410156H0V62.9102ZM100.73 57.9102C103.724 58.6049 106.445 60.1708 108.55 62.4102C109.709 63.6166 110.716 64.9598 111.55 66.4102C111.55 66.5702 106.15 70.2202 102.86 72.2602C102.74 72.3402 102.26 71.8202 101.73 71.0302C101.129 69.9938 100.276 69.1265 99.2496 68.5093C98.2231 67.892 97.057 67.5448 95.86 67.5002C92.07 67.2402 89.63 69.2302 89.65 72.5002C89.6187 73.3143 89.8051 74.1221 90.19 74.8401C91.02 76.5701 92.57 77.6001 97.43 79.7001C106.38 83.5501 110.21 86.0901 112.59 89.7001C115.25 93.7001 115.84 100.16 114.04 104.94C112.04 110.14 107.14 113.67 100.21 114.84C97.0448 115.203 93.8468 115.169 90.69 114.74C85.8722 113.959 81.4279 111.665 78 108.19C76.85 106.92 74.61 103.61 74.75 103.37C75.1151 103.099 75.4994 102.855 75.9 102.64L80.5 100L84.09 97.9202L84.84 99.0302C86.1057 100.841 87.7166 102.384 89.58 103.57C93.58 105.67 99.04 105.38 101.74 102.95C102.647 102.06 103.212 100.88 103.338 99.6151C103.464 98.3507 103.143 97.0821 102.43 96.0302C101.43 94.6402 99.43 93.4702 93.84 91.0302C87.39 88.2502 84.61 86.5302 82.07 83.7902C80.4843 81.982 79.3136 79.8488 78.64 77.5402C78.1375 74.9026 78.0633 72.2013 78.42 69.5402C79.75 63.3102 84.42 58.9602 91.24 57.6702C94.3984 57.2794 97.5977 57.367 100.73 57.9302V57.9102ZM71.39 63.1502V68.2701H55.16V114.5H43.65V68.2602H27.38V63.2602C27.3363 61.5389 27.3831 59.8165 27.52 58.1002C27.58 58.0202 37.52 57.9802 49.52 58.0002H71.33L71.39 63.1502Z"
        fill="#007ACC"
      />
    </svg>
  ),
  git: () => (
    <svg
      width="107"
      height="107"
      viewBox="0 0 107 107"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M8.6448 58.2254C6.03507 55.6156 6.03507 51.3844 8.6448 48.7746L48.7746 8.6448C51.3844 6.03507 55.6156 6.03507 58.2254 8.6448L98.3551 48.7746C100.965 51.3844 100.965 55.6156 98.3551 58.2254L58.2254 98.3551C55.6156 100.965 51.3844 100.965 48.7746 98.3551L8.6448 58.2254Z"
        fill="#EE513B"
      />
      <path
        d="M40.6223 16.9248L36.5586 20.9886L47.0543 31.4843C46.6296 32.3952 46.3926 33.4111 46.3926 34.4824C46.3926 37.5239 48.3035 40.119 50.9902 41.1325V66.8078C48.3035 67.8213 46.3926 70.4164 46.3926 73.4579C46.3926 77.3821 49.5738 80.5633 53.498 80.5633C57.4223 80.5633 60.6035 77.3821 60.6035 73.4579C60.6035 70.7006 59.0329 68.3098 56.7375 67.1321V41.1676L66.7704 51.2005C66.3665 52.093 66.1417 53.0837 66.1417 54.127C66.1417 58.0512 69.323 61.2324 73.2472 61.2324C77.1714 61.2324 80.3527 58.0512 80.3527 54.127C80.3527 50.2027 77.1714 47.0215 73.2472 47.0215C72.4845 47.0215 71.7502 47.1415 71.0614 47.3639L60.2862 36.5887C60.4925 35.9233 60.6035 35.2157 60.6035 34.4824C60.6035 30.5581 57.4223 27.3769 53.498 27.3769C52.7647 27.3769 52.0575 27.488 51.3918 27.6943L40.6223 16.9248Z"
        fill="white"
      />
    </svg>
  ),
  tailwind: () => (
    <svg
      width="100"
      height="100"
      viewBox="0 0 32 32"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M24.668 12.6801C23.668 12.3357 22.7854 11.7165 22.1213 10.8934C21.3894 9.97642 20.4574 9.23896 19.3966 8.73747C18.3359 8.23599 17.1745 7.98377 16.0013 8.00011C14.4231 7.88834 12.8607 8.3751 11.6253 9.36345C10.3899 10.3518 9.57202 11.7692 9.33464 13.3334C9.8022 12.5511 10.5059 11.9373 11.3445 11.5803C12.1831 11.2233 13.1133 11.1415 14.0013 11.3468C14.9996 11.7012 15.8807 12.324 16.548 13.1468C17.2839 14.0565 18.2177 14.7863 19.2782 15.2808C20.3387 15.7752 21.498 16.0212 22.668 16.0001C24.2461 16.1119 25.8085 15.6251 27.044 14.6368C28.2794 13.6484 29.0972 12.231 29.3346 10.6668C28.8756 11.4585 28.1741 12.0816 27.3338 12.4441C26.4935 12.8066 25.5589 12.8894 24.668 12.6801ZM7.33464 19.3201C8.33456 19.6645 9.21719 20.2837 9.8813 21.1068C10.6132 22.0238 11.5452 22.7613 12.606 23.2627C13.6667 23.7642 14.8281 24.0164 16.0013 24.0001C17.5795 24.1119 19.1419 23.6251 20.3773 22.6368C21.6127 21.6484 22.4306 20.231 22.668 18.6668C22.2004 19.4491 21.4967 20.063 20.6581 20.4199C19.8195 20.7769 18.8893 20.8587 18.0013 20.6534C17.003 20.299 16.1219 19.6762 15.4546 18.8534C14.7167 17.946 13.7826 17.2178 12.7225 16.7235C11.6625 16.2293 10.5041 15.9819 9.33464 16.0001C7.75646 15.8883 6.19408 16.3751 4.95864 17.3634C3.72321 18.3518 2.90536 19.7692 2.66797 21.3334C3.12704 20.5417 3.82851 19.9186 4.66881 19.5561C5.50911 19.1936 6.44371 19.1108 7.33464 19.3201Z"
        fill="#00BCFF"
      />
    </svg>
  ),
  shadcn: () => (
    <svg
      width="256"
      height="256"
      viewBox="0 0 256 256"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <g clipPath="url(#clip0_25_2)">
        <path
          d="M208 128L128 208M192 40L40 192"
          stroke="black"
          strokeWidth="25"
          strokeLinecap="round"
        />
      </g>
      <defs>
        <clipPath id="clip0_25_2">
          <rect width="256" height="256" fill="white" />
        </clipPath>
      </defs>
    </svg>
  ),
};
